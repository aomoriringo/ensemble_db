{% extends "article_base.html" %}

{% load ensemble_extras %}
{% block article %}
<h4>Latest Works</h4>
{% if latest_work_list %}
  <table class="table table-bordered table-condensed">
    <tr>
      <th>Name</th>
      <th>Name(jp)</th>
      <th>Composer</th>
      <th>Arranger</th>
      <th>Category</th>
    </tr>
  {% for work in latest_work_list %}
    <tr>
      <td><a href="{% url 'work_detail' work.id %}">{{ work.title }}</a></td>
      <td><a href="{% url 'work_detail' work.id %}">{{ work.title_jp }}</a></td>
      <td>{% obj_join work.workcomposer_set.all "/" "composer.name_jp" %}</td>
      <td>{% obj_join work.workarranger_set.all "/" "arranger.name_jp" %}</td>
      <td>{{ work.workmusiccategory_set.first.music_category.name_jp }}</td>
    </tr>
  {% endfor %}
  </table>
{% else %}
  <p>No works are available.</p>
{% endif %}

<h4>Latest Writers</h4>
{% if latest_writer_list %}
  <table class="table table-bordered table-condensed">
    <tr>
      <th>Name</th>
      <th>Name(jp)</th>
    </tr>
  {% for writer in latest_writer_list %}
    <tr>
      <td><a href="{% url 'writer_detail' writer.id %}">{{ writer.name }}</a></td>
      <td><a href="{% url 'writer_detail' writer.id %}">{{ writer.name_jp }}</a></td>
    </tr>
  {% endfor %}
  </table>
{% else %}
  <p>No writers are available.</p>
{% endif %}

{% endblock %}
